<!-- src/app/pages/inicio/inicio.html -->

<!-- ── KEYBOARD ESCAPE HANDLER ─────────────────────────── -->
<div (keydown)="onEscKey($event)" tabindex="-1" style="outline:none">

  <!-- ══════════════════════════════════════════════
       ANNOUNCEMENT BAR
  ══════════════════════════════════════════════ -->
  

  <!-- ══════════════════════════════════════════════
       NAVBAR
  ══════════════════════════════════════════════ -->
  <nav class="nav"
       [class.scrolled]="navScrolled"
       [class.announce-hidden]="!announceVisible">

    <div class="nav-left">
      <button class="nav-menu-btn"
              [class.open]="mobileMenuOpen"
              (click)="toggleMobileMenu()"
              aria-label="Menú">
        <span></span><span></span>
      </button>
      <ul class="nav-links">
        <li><a routerLink="/catalog">Shop</a></li>
        <li class="has-dropdown">
          <a href="#">Colecciones</a>
          <div class="dropdown">
            @for (drop of drops(); track drop.id) {
              <a [routerLink]="['/drops', drop.id]">DROP {{ drop.number }}</a>
            }
            @if (loadingDrops()) {
              <span class="dropdown-loading">Cargando...</span>
            }
          </div>
        </li>
      </ul>
    </div>

    <div class="pd-logo-container">
      <a href="#" class="nav-logo-link">
        <img src="assets/Logo2.webp" alt="Blessed Logo" class="logo-img" />
      </a>
    </div>


    <div class="nav-right">
      <button class="nav-icon-btn" aria-label="Buscar">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <circle cx="11" cy="11" r="7"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
        </svg>
      </button>
      <button class="nav-icon-btn" aria-label="Cuenta">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
          <circle cx="12" cy="7" r="4"/>
        </svg>
      </button>
      <button class="nav-icon-btn nav-cart-btn" (click)="openCart()" aria-label="Carrito">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
          <line x1="3" y1="6" x2="21" y2="6"/>
          <path d="M16 10a4 4 0 0 1-8 0"/>
        </svg>
        <span class="cart-badge">{{ cartCount }}</span>
      </button>
    </div>
  </nav>
  @if (announceVisible) {
    <div class="announcement-bar" id="announcementBar">
      <div class="announcement-inner">
        <span>Envío gratis en compras superiores a $50.000</span>
        <span class="sep">·</span>
        <span>3 cuotas sin interés</span>
        <span class="sep">·</span>
        <span>Drop 02 disponible ahora</span>
      </div>
      <button class="announcement-close" (click)="closeAnnouncement()" aria-label="Cerrar">×</button>
    </div>
  }

  <!-- ── MOBILE MENU ─────────────────────────────────────── -->
  <div class="mobile-menu" [class.open]="mobileMenuOpen">
    <div class="mobile-menu-inner">
      <a href="#" class="mobile-nav-link" (click)="closeMobileMenu()">Shop</a>
        @for (drop of drops(); track drop.id) {
          <a [routerLink]="['/drops', drop.id]"
            class="mobile-nav-link"
            (click)="closeMobileMenu()">
            DROP {{ drop.number }}
          </a>
        }
    </div>
  </div>

  <!-- ══════════════════════════════════════════════
       HERO — SPLIT FULL-SCREEN
  ══════════════════════════════════════════════ -->
  <section class="hero" id="hero">

    
    <panelInicio></panelInicio>

    <!-- Scroll indicator -->
    <div class="hero-scroll">
      <span class="hero-scroll-line"></span>
      <span class="hero-scroll-text">Scroll</span>
    </div>
  </section>

  <igCarousel></igCarousel>

  <!-- ══════════════════════════════════════════════
       STATEMENT EDITORIAL
  ══════════════════════════════════════════════ -->
  <section class="statement">
    <div class="statement-inner">
      <p class="statement-text reveal" data-delay="0">
        No es solo ropa.<br>
        <em>Es una declaración.</em>
      </p>
    </div>
  </section>


  <!-- ══════════════════════════════════════════════
       FULL-BLEED — CAMPAÑA (estilo Zara)
  ══════════════════════════════════════════════ -->
  <section class="fullbleed reveal" data-delay="0">
    <img src="assets/IndexSlide-1.webp" alt="Campaña Drop 02" />
    <div class="fullbleed-caption">
      <span class="fullbleed-tag">Colección 25'</span>
      <h2 class="fullbleed-title">BLESSED<br><em>SS25</em></h2>
      <a href="/catalog" class="btn-white">Ver colección</a>
    </div>
  </section>

  <!-- ══════════════════════════════════════════════
       DOBLE IMAGEN (estilo editorial MADH)
  ══════════════════════════════════════════════ -->
  <section class="dual-image">
    @if (loadingProducts()) {
      <div class="pd-loading" style="grid-column: span 2; height: 300px;">Cargando destacados...</div>
    } @else {
      @for (p of featuredProducts(); track p.id; let i = $index) {
        <div class="dual-item reveal" [attr.data-delay]="i * 180">
          <div class="dual-img-wrap">
            <a [routerLink]="['/product', p.id]">
              <img [src]="p.images[0]" [alt]="p.name" />
            </a>
          </div>
          <div class="dual-info">
            <h3 class="dual-title">{{ p.name }}</h3>
            <div class="dual-pricing">
              <span>{{ formatPrice(p.price) }}</span>
              @if (p.originalPrice && p.originalPrice > p.price) {
                <span class="price-old-sm">{{ formatPrice(p.originalPrice) }}</span>
              }
            </div>
            <a [routerLink]="['/product', p.id]" class="btn-link-sm">Ver producto →</a>
          </div>
        </div>
      }
    }
  </section>

  

  <!-- ══════════════════════════════════════════════
       SEGUNDA FULLBLEED
  ══════════════════════════════════════════════ -->
  <section class="fullbleed fullbleed--light reveal" data-delay="0">
    <img src="assets/IndexSlide-4.webp" alt="Editorial Colección 25'" />
    <div class="fullbleed-caption fullbleed-caption--bottom-left">
      <span class="fullbleed-tag">T-Shirts</span>
      <h2 class="fullbleed-title">BÁSICOS<br><em>que hablan</em></h2>
      <a href="#productos" class="btn-dark">Ver T-Shirts</a>
    </div>
  </section>

  <!-- ══════════════════════════════════════════════
       CART DRAWER
  ══════════════════════════════════════════════ -->
  <app-cart-drawer></app-cart-drawer>

  <!-- ── TOAST ─────────────────────────────────────────────── -->
  <div class="toast" [class.show]="toastVisible">{{ toastMessage }}</div>
  

  <!-- ══════════════════════════════════════════════
       NEWSLETTER
  ══════════════════════════════════════════════ -->
  <section class="newsletter">
    <div class="newsletter-inner reveal" data-delay="0">
      <span class="label-tag">Comunidad</span>
      <h2 class="newsletter-title">Become a<br><em>Crew Member</em></h2>
      <p class="newsletter-sub">Suscribite para recibir los drops antes que nadie.</p>
      <form class="newsletter-form" (ngSubmit)="onNewsletterSubmit()">
        <input
          type="email"
          placeholder="tu@email.com"
          class="newsletter-input"
          [(ngModel)]="newsletterEmail"
          name="email"
          required
        />
        <button type="submit" class="newsletter-btn" [disabled]="newsletterLoading">
          @if (newsletterLoading) { ... }
          @else if (newsletterDone) { ✓ Suscripto }
          @else { Suscribir }
        </button>
      </form>
    </div>
  </section>

  <!-- ══════════════════════════════════════════════
       FOOTER
  ══════════════════════════════════════════════ -->
  <footer class="footer">
    <div class="footer-top">
      <div class="footer-brand">
        <a href="#" class="footer-logo">"BLESSED"</a>
        <p class="footer-tagline">
          Streetwear de autor.<br>Buenos Aires, Argentina.
        </p>
        <div class="footer-socials">
          <a href="#" aria-label="Instagram">Instagram</a>
          <a href="#" aria-label="Facebook">Facebook</a>
        </div>
      </div>
      <nav class="footer-nav">
        <div class="footer-col">
          <h4>Shop</h4>
          <a href="#">T-Shirts</a>
          <a href="#">Hoodies</a>
          <a href="#">Crewnecks</a>
          <a href="#">Drop 01</a>
          <a href="#">Drop 02</a>
        </div>
        <div class="footer-col">
          <h4>Ayuda</h4>
          <a href="#">Guía de talles</a>
          <a href="#">Envíos y devoluciones</a>
          <a href="#">Contacto</a>
          <a href="#">Defensa del consumidor</a>
        </div>
      </nav>
    </div>
    <div class="footer-bottom">
      <span>© 2026 "BLESSED" — Todos los derechos reservados</span>
      <span>
        <a href="#">Términos</a>
        <a href="#">Privacidad</a>
        <a href="#">Cookies</a>
      </span>
    </div>
  </footer>

</div><!-- /keydown wrapper -->
